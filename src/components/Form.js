import React from 'react';
import TextField from 'material-ui/TextField';
import RaisedButton from 'material-ui/RaisedButton';

const Form = (props) => {

  const cancelButton = props.cancel ? <RaisedButton
    label="Cancel"
    secondary={true}
    onTouchTap={props.handleClose}
    /> : '';
  
  const handleSubmit = (e) => {
    e.preventDefault();
    props.handleSubmit(form);
  }

  let form;

  return (
    <form 
      action={props.action}
      method={props.method}
      style={styles.form}
      onSubmit={handleSubmit}
      ref={f => form = f}
    >
    <div style={styles.validation}>{props.validation}</div>
    {
      props.fields.map((field, i) => {
        return (
          <TextField
            key={i}
            name={field.name}
            hintText={field.hint || field.label}
            floatingLabelText={field.label}
            // errorText={fields.touched && fields.error}
            floatingLabelFixed
            {...field}
          />);
        }
      )
    }
    <div >
      {cancelButton}
      <RaisedButton
        type="submit"
        label="Submit"
        primary={true}
        style={styles.button}
      />
    </div>
  </form>
  );
}

const styles = {
  form: {
    display: 'flex',
    flexDirection: 'column',
    alignItems: 'center',
    justifyContent: 'space-around'
  },
  button: {
    alignSelf: 'flex-end',
    marginLeft: 5,
    marginBottom: 20,
    marginTop: 14
  },
  validation : {
    color: 'red'
  }
}

export default Form;
